const products = [
  {
    id: 1,
    name: 'Курица',
    type: 'белок',
    calories: 120,
    protein: 25,
    fat: 3,
    carbs: 0,
    category: ['завтрак', 'обед', 'ужин'],
  },
  {
    id: 2,
    name: 'Гречка',
    type: 'углеводы',
    calories: 110,
    protein: 4,
    fat: 2,
    carbs: 20,
    category: ['обед', 'ужин'],
  },
  // Еще продукты...
];

class NutritionPlanner {
  constructor(products) {
    this.products = products;
  }

  generateWeeklyMenu(bmi) {
    const weeklyMenu = {
      понедельник: this.generateDailyMenu(),
      вторник: this.generateDailyMenu(),
      среда: this.generateDailyMenu(),
      четверг: this.generateDailyMenu(),
      пятница: this.generateDailyMenu(),
      суббота: this.generateDailyMenu(),
      воскресенье: this.generateDailyMenu(),
    };

    return this.createNutritionTable(weeklyMenu);
  }

  generateDailyMenu() {
    return {
      завтрак: this.selectMealProducts('завтрак'),
      обед: this.selectMealProducts('обед'),
      ужин: this.selectMealProducts('ужин'),
    };
  }

  selectMealProducts(mealType) {
    return this.products
      .filter((product) => product.category.includes(mealType))
      .slice(0, 3); // Например, 3 продукта на прием пищи
  }

  createNutritionTable(weeklyMenu) {
    let tableHTML = `
        <table border="1">
            <thead>
                <tr>
                    <th>День</th>
                    <th>Завтрак</th>
                    <th>Обед</th>
                    <th>Ужин</th>
                </tr>
            </thead>
            <tbody>
        `;

    for (let [day, menu] of Object.entries(weeklyMenu)) {
      tableHTML += `
            <tr>
                <td>${day}</td>
                <td>${this.formatMealProducts(menu.завтрак)}</td>
                <td>${this.formatMealProducts(menu.обед)}</td>
                <td>${this.formatMealProducts(menu.ужин)}</td>
            </tr>
            `;
    }

    tableHTML += `
            </tbody>
        </table>
        `;

    return tableHTML;
  }

  formatMealProducts(products) {
    return products
      .map((product) => `${product.name} (${product.calories} ккал)`)
      .join('<br>');
  }
}

// Использование
function generateNutritionPlan() {
  // Допустим, ИМТ = 28
  const bmi = 28;
  const planner = new NutritionPlanner(products);

  // Генерируем таблицу
  const nutritionTable = planner.generateWeeklyMenu(bmi);

  // Вставляем в DOM
  document.getElementById('nutrition-plan').innerHTML = `
 
   
<table>
    <thead>
        <tr>
            <th colspan="6">Меню на неделю</th>
        </tr>
        <tr>
            <th>День</th>
            <th>1й приём</th>
            <th>2й приём</th>
            <th>3й приём</th>
            <th>4й приём</th>
            <th>5й приём</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Гречка -- 60 гр.<br>
                - Масло оливковое -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Макароны -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Перловка -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>2й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Макароны -- 60 гр.<br>
                - Масло льняное -- 1 ст. ложка<br>
                - Рыба (тунец, горбуша, треска) -- 80 гр.
            </td>
            <td>
                - Перловка -- 50 гр.<br>
                - Грудка (Курица/индейка) -- 70 гр.
            </td>
            <td>
                - Гречка -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>3й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Перловка -- 60 гр.<br>
                - Масло оливковое -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Макароны -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Гречка -- 30 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>4й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Гречка -- 60 гр.<br>
                - Масло льняное -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Перловка -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Макароны -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>5й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Макароны -- 60 гр.<br>
                - Масло оливковое -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Гречка -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Перловка -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>6й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Перловка -- 60 гр.<br>
                - Масло льняное -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Макароны -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Гречка -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
        <tr>
            <td>7й день</td>
            <td>
                - Овсянка -- 90 гр.<br>
                - Зеленое яблоко -- 1 шт.<br>
                - Масло сливочное -- 5 гр.<br>
                - Сыр -- 15 гр.<br>
                - Яйца -- 1 желток и 4 белка
            </td>
            <td>
                - Гречка -- 60 гр.<br>
                - Масло оливковое -- 1 ст. ложка<br>
                - Грудка (Курица/индейка) -- 80 гр.
            </td>
            <td>
                - Перловка -- 50 гр.<br>
                - Рыба (тунец, горбуша, треска) -- 70 гр.
            </td>
            <td>
                - Макароны -- 30 гр.<br>
                - Грудка (Курица/индейка) -- 65 гр.
            </td>
            <td>
                - Творог 5% жирности -- 160 гр.
            </td>
        </tr>
    </tbody>
</table>

<div class="note">
    <h4><strong>Примечание:</strong></h4>
    <p>1. К приемам пищи нужно обязательно добавлять овощи, только чтобы один прием пищи <span class="underline">не превышал в общем 350-400 грамм</span>! Овощи кушать в сыром виде, кроме капусты Брокколи, Цветной или спаржевой фасоли -- их нужно немного отварить. Так же можно употреблять в сыром виде в небольшом количестве морковь и свеклу. Помидоры, кабачки, баклажаны и тыкву - ИСКЛЮЧИТЬ!</p>
    <p>2. Питьевой режим -- выпивать минимум 2-2,5 литра воды в день. <strong>ОБЯЗАТЕЛЬНО !!!!!!!!!!!!!!!!</strong></p>
    <p>3. Между приемами пищи <span class="underline">ничего кушать (перекусывать) нельзя!</span> Строго по времени через каждые 3 часа (+/- 10 минут)</p>
    <p>4. Добавить в рацион сухую клетчатку (например, «Сибирская»), 2 раза в день (утро/вечер) по 2 ст.ложки внутрь запивая водой</p>
    <p>5. Если любите пить чай во время приема пищи, то чай должен быть не сладкий и без добавок (ароматизаторов)</p>
    <p>6. Из молочной продукции можно только творог и сыр.</p>
    <p>7. Кофе исключить (на начальной стадии похудения, хотя бы на месяц)</p>
    <p>8. Алкоголь, хлебобулочные изделия, сладкие газированные напитки и жвачки -- ИСКЛЮЧИТЬ</p>
    <p>9. Сон минимум 7 часов.</p>
    <p>10. Все посчитано в вареном виде, с процентом на воду.</p>
    <p>11. Отваривать куриную грудку (индейку) следует в чуть подсоленной воде, без специй и добавок!!</p>
                <p>Контроль веса 1 раз в неделю, и делать соответствующие записи своего веса. По окончанию 4й недели расписанного питания проводиться корректировка, корректировка по контролю веса. Даже если вы не скинете вес на протяжении 1 недели и наоборот прибавите -- не страшно! Питайтесь дальше так, как написано в таблице, и вес будет уходить! Нужно разогнать обмен веществ!</p>
                <p><span class="underline">Если хотите добиться результата, кушайте только то что прописано в таблице и ничего больше!</span></p>
</div>

  
  
  `;
}

// HTML для отображения
/*
<div id="nutrition-plan"></div>
<button onclick="generateNutritionPlan()">Сгенерировать план питания</button>
*/

// Расширенная версия с более сложной логикой
class AdvancedNutritionPlanner extends NutritionPlanner {
  constructor(products) {
    super(products);
  }

  // Более сложный алгоритм выбора продуктов
  selectMealProducts(mealType, bmi) {
    // Фильтрация с учетом ИМТ и типа приема пищи
    return this.products
      .filter(
        (product) =>
          product.category.includes(mealType) &&
          this.checkProductSuitability(product, bmi)
      )
      .slice(0, 3);
  }

  checkProductSuitability(product, bmi) {
    // Логика подбора продуктов в зависимости от ИМТ
    if (bmi < 18.5) {
      return product.calories > 150; // Более калорийные
    } else if (bmi > 30) {
      return product.calories < 100; // Менее калорийные
    }
    return true;
  }
}
